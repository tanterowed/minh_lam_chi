// ==UserScript==
// @name         s-u-n-d-a-y-w-e-b-r-y
// @namespace    https://github.com/tanterowed/minh_lam_chi/raw/main/s-u-n-d-a-y-w-e-b-r-y.user.js
// @version      2024.08.16
// @description  down s-u-n-d-a-y-w-e-b-r-y
// @author       You
// @include      /^https:\/\/www\.sund[a@]y-w[e3]bry\.c[o0]m\/ep[i1]s[o0]de\//
// @icon         https://raw.githubusercontent.com/tanterowed/minh_lam_chi/main/s-u-n-d-a-y-w-e-b-r-y.png
// @grant        GM_download
// @grant        GM_info
// @downloadURL  https://github.com/tanterowed/minh_lam_chi/raw/main/s-u-n-d-a-y-w-e-b-r-y.user.js
// @updateURL    https://github.com/tanterowed/minh_lam_chi/raw/main/s-u-n-d-a-y-w-e-b-r-y.meta.js
// ==/UserScript==

const a0_0x1a5c9d=a0_0x3e50;(function(_0x56868e,_0x131a5c){const _0x15dd06=a0_0x3e50,_0x1191b2=_0x56868e();while(!![]){try{const _0x5a4938=parseInt(_0x15dd06(0xe1))/0x1*(-parseInt(_0x15dd06(0xcc))/0x2)+-parseInt(_0x15dd06(0xa5))/0x3*(parseInt(_0x15dd06(0xa9))/0x4)+parseInt(_0x15dd06(0xe4))/0x5+parseInt(_0x15dd06(0xa4))/0x6+parseInt(_0x15dd06(0xdf))/0x7*(parseInt(_0x15dd06(0xaf))/0x8)+parseInt(_0x15dd06(0xd0))/0x9*(parseInt(_0x15dd06(0x9d))/0xa)+parseInt(_0x15dd06(0xd2))/0xb*(-parseInt(_0x15dd06(0xab))/0xc);if(_0x5a4938===_0x131a5c)break;else _0x1191b2['push'](_0x1191b2['shift']());}catch(_0x4549d9){_0x1191b2['push'](_0x1191b2['shift']());}}}(a0_0x3f29,0x2f630));let downloading_current=0x0,downloading_total=0x0;const downloadMode=GM_info[a0_0x1a5c9d(0xc0)];let folder_title='';function sleep(_0x4babb7){return new Promise(_0x494fac=>setTimeout(_0x494fac,_0x4babb7));}function a0_0x3f29(){const _0x568969=['3rem','status-num','floor','458BlggJR','toBlob','alignItems','drawImage','9LpyBhV','filter','11ekPsXq','absolute','tai-ve','50vw','center','canvas','insertBefore','.jpg','position','.episode-header-title','browser','src','value','267827NTIqkE','10000','523KHKmMZ','href','click','1623450jeCXoG','addEventListener','\x0a\x09.status-num\x20{\x0a\x09\x09font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x09\x09font-size:\x203rem;\x0a\x09\x09color:\x20#FD7377;\x0a\x09\x09-webkit-text-stroke:\x201px\x20#C62428;\x0a\x09\x09border:\x200.2rem\x20solid\x20#167975;\x0a\x09\x09border-radius:\x201rem;\x0a\x09\x09padding:\x200\x202rem;\x0a\x09\x09background-color:\x20#F9FDFD;\x0a\x09\x09box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x09\x09min-height:\x204rem;\x0a\x09\x09display:\x20none;\x0a\x09}\x0a\x09','textContent','className','naturalHeight','length','#heartbeat','width','setAttribute','getElementsByTagName','trim','zIndex','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','\x20/\x20','.status-num','left','117310XjChFe','style','#episode-json','innerHTML','getContext','heartbeat','div','604368pkXBYA','585411JUfefA','Anonymous','createObjectURL','firstChild','4qDetxl','pages','974316xosShk','querySelector','0.5rem','display','32PjBaAa','top','cursor','image/jpeg','pageStructure','height','Error','crossOrigin','createElement','all','head','load','.episode-header','\x0a\x09.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x09\x09transform-origin:\x20center;\x0a\x09}\x0a\x0a\x09@keyframes\x20heartbeat\x20{\x0a\x09\x090%\x20{\x0a\x09\x09\x09transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x09\x09}\x0a\x09\x0925%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x09\x09}\x0a\x09\x0950%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x09\x09}\x0a\x09\x0975%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x09\x09}\x0a\x09\x09100%\x20{\x0a\x09\x09\x09transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x09\x09}\x0a\x09}\x0a\x09','stylesheet','appendChild','replace','downloadMode','readableProduct','1.5rem','transform','log','pointer','img','parse','flex'];a0_0x3f29=function(){return _0x568969;};return a0_0x3f29();}const load_image=_0x54140a=>new Promise((_0x57bd4,_0x18d82a)=>{const _0x272923=a0_0x1a5c9d,_0x177fb1=new Image();_0x177fb1[_0x272923(0xe5)](_0x272923(0xba),()=>{_0x57bd4(_0x177fb1);}),_0x177fb1['addEventListener']('error',()=>{_0x18d82a(new Error('Failed\x20to\x20load\x20image'));}),_0x177fb1['src']=_0x54140a,_0x177fb1[_0x272923(0xb6)]=_0x272923(0xa6);}),img_descramble=(_0x199820,_0x433e4c)=>{const _0x566904=a0_0x1a5c9d,_0x2cfcf8=0x4,_0x4508e9=0x8,_0x1042ef=_0x199820,_0x40ea91=_0x199820['naturalWidth'],_0xdbc95f=_0x199820[_0x566904(0xe9)],_0x207fee=document[_0x566904(0xb7)](_0x566904(0xd7));_0x207fee['width']=_0x40ea91,_0x207fee[_0x566904(0xb4)]=_0xdbc95f;const _0x5b300f=Math[_0x566904(0xcb)](_0x40ea91/(_0x2cfcf8*_0x4508e9))*_0x4508e9,_0x312936=Math['floor'](_0xdbc95f/(_0x2cfcf8*_0x4508e9))*_0x4508e9,_0x62583b=_0x207fee[_0x566904(0xa1)]('2d');_0x62583b['drawImage'](_0x1042ef,0x0,0x0,_0x40ea91,_0xdbc95f,0x0,0x0,_0x40ea91,_0xdbc95f);for(let _0x3c89ae=0x0;_0x3c89ae<_0x2cfcf8*_0x2cfcf8;_0x3c89ae++){const _0x2dac8f=Math['floor'](_0x3c89ae/_0x2cfcf8)*_0x312936,_0x348893=_0x3c89ae%_0x2cfcf8*_0x5b300f,_0x51d932=Math[_0x566904(0xcb)](_0x3c89ae/_0x2cfcf8),_0x18ac54=_0x3c89ae%_0x2cfcf8*_0x2cfcf8+_0x51d932,_0x55e0f6=_0x18ac54%_0x2cfcf8*_0x5b300f,_0x13bd07=Math[_0x566904(0xcb)](_0x18ac54/_0x2cfcf8)*_0x312936;_0x62583b[_0x566904(0xcf)](_0x1042ef,_0x348893,_0x2dac8f,_0x5b300f,_0x312936,_0x55e0f6,_0x13bd07,_0x5b300f,_0x312936);}_0x207fee[_0x566904(0xcd)](_0x5f4337=>{const _0x59fadf=_0x566904;let _0x484b8d=(''+(_0x433e4c+0x1))['padStart'](0x3,'0')+_0x59fadf(0xd9);downloadMode===_0x59fadf(0xdc)&&(_0x484b8d=folder_title+_0x484b8d);const _0x40c687=URL[_0x59fadf(0xa7)](_0x5f4337);GM_download({'url':_0x40c687,'name':_0x484b8d}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();},_0x566904(0xb2),0x1);},download_encrypted=async(_0x273aef,_0xedcf4d)=>{const _0x4b6888=a0_0x1a5c9d;try{const _0x1e4acf=await load_image(_0x273aef);img_descramble(_0x1e4acf,_0xedcf4d);}catch(_0x277dfd){console[_0x4b6888(0xc4)](_0x4b6888(0xb5));}};function update_status(){const _0x142e30=a0_0x1a5c9d;document['querySelector'](_0x142e30(0xf3))['style'][_0x142e30(0xae)]='flex',document[_0x142e30(0xac)](_0x142e30(0xf3))[_0x142e30(0x9e)]['alignItems']='center',document['querySelector'](_0x142e30(0xf3))[_0x142e30(0xa0)]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const _0x24ca7a=a0_0x1a5c9d;let _0x7d2306=document['createElement'](_0x24ca7a(0xa3));return _0x7d2306[_0x24ca7a(0xe8)]=_0x24ca7a(0xca),_0x7d2306['textContent']=downloading_current+_0x24ca7a(0xf2)+downloading_total,_0x7d2306;}function a0_0x3e50(_0x5d56de,_0x3a81e3){const _0x3f298f=a0_0x3f29();return a0_0x3e50=function(_0x3e5012,_0x4d9c61){_0x3e5012=_0x3e5012-0x9c;let _0x24852c=_0x3f298f[_0x3e5012];return _0x24852c;},a0_0x3e50(_0x5d56de,_0x3a81e3);}function create_download_icon(){const _0x10173a=a0_0x1a5c9d;let _0x5c1ae1=document[_0x10173a(0xb7)]('div'),_0x290a02=document[_0x10173a(0xb7)](_0x10173a(0xc6));_0x290a02[_0x10173a(0xe8)]=_0x10173a(0xd4),_0x290a02[_0x10173a(0xed)](_0x10173a(0xdd),_0x10173a(0xf1)),_0x290a02[_0x10173a(0x9e)][_0x10173a(0xec)]=_0x10173a(0xc9),_0x290a02['style'][_0x10173a(0xb1)]=_0x10173a(0xc5),_0x5c1ae1['appendChild'](_0x290a02);let _0x2953ef=document[_0x10173a(0xb7)]('link');_0x2953ef['rel']=_0x10173a(0xbd),_0x2953ef[_0x10173a(0xe2)]='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[_0x10173a(0xee)](_0x10173a(0xb9))[0x0]['appendChild'](_0x2953ef);let _0x22853b=document['createElement'](_0x10173a(0xa3));_0x22853b['className']='status',_0x22853b['style']['display']=_0x10173a(0xc8),_0x22853b[_0x10173a(0x9e)]['justifyContent']=_0x10173a(0xd6),_0x22853b['style'][_0x10173a(0xce)]='center',_0x22853b['style']['gap']=_0x10173a(0xc2),_0x22853b[_0x10173a(0x9e)][_0x10173a(0xda)]=_0x10173a(0xd3),_0x22853b[_0x10173a(0x9e)][_0x10173a(0xf0)]=_0x10173a(0xe0),_0x22853b[_0x10173a(0x9e)][_0x10173a(0xb0)]=_0x10173a(0xad),_0x22853b['style'][_0x10173a(0x9c)]=_0x10173a(0xd5),_0x22853b[_0x10173a(0x9e)][_0x10173a(0xc3)]='translate(-50%)';let _0x310c4f=create_status_box();const _0x118007=document['createElement'](_0x10173a(0x9e));_0x118007['textContent']=_0x10173a(0xe6),document['head']['appendChild'](_0x118007),_0x22853b['appendChild'](_0x5c1ae1),_0x22853b[_0x10173a(0xbe)](_0x310c4f);let _0x36dc5d=document[_0x10173a(0xac)](_0x10173a(0xbb));_0x36dc5d['style'][_0x10173a(0xda)]='relative';let _0x233462=_0x36dc5d[_0x10173a(0xa8)];return _0x36dc5d[_0x10173a(0xd8)](_0x22853b,_0x233462),_0x22853b;}const throttlePromises=async(_0x331ec3,_0x5929c5)=>{const _0x30463b=a0_0x1a5c9d;while(_0x331ec3['length']>0x0){await Promise[_0x30463b(0xb8)](_0x331ec3['splice'](0x0,_0x5929c5)['map'](_0x60bca4=>_0x60bca4())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x2651a0=a0_0x1a5c9d;let _0x538b09=document[_0x2651a0(0xac)](_0x2651a0(0xeb));!_0x538b09&&(_0x538b09=document[_0x2651a0(0xb7)](_0x2651a0(0x9e)),_0x538b09[_0x2651a0(0xed)]('id',_0x2651a0(0xa2)),document[_0x2651a0(0xb9)]['appendChild'](_0x538b09)),_0x538b09[_0x2651a0(0xe7)]=_0x2651a0(0xbc);},off_heartbeat_css=()=>{const _0x1c004f=a0_0x1a5c9d,_0x3f13e4=document[_0x1c004f(0xac)](_0x1c004f(0xeb));_0x3f13e4['textContent']='';};((async()=>{const _0x212116=a0_0x1a5c9d,_0x45d5cb=JSON[_0x212116(0xc7)](document['querySelector'](_0x212116(0x9f))['dataset'][_0x212116(0xde)]),_0x5d6c5c=_0x45d5cb[_0x212116(0xc1)][_0x212116(0xb3)][_0x212116(0xaa)][_0x212116(0xd1)](_0x5a0ab4=>_0x5a0ab4['src']);folder_title=document[_0x212116(0xac)](_0x212116(0xdb))[_0x212116(0xe7)],folder_title=folder_title[_0x212116(0xef)]()[_0x212116(0xbf)]('.','');folder_title?folder_title=folder_title+'/':folder_title='';if(_0x5d6c5c[_0x212116(0xea)]>0x0){downloading_total=_0x5d6c5c[_0x212116(0xea)];const _0xd0fd25=create_download_icon();_0xd0fd25[_0x212116(0xe5)](_0x212116(0xe3),async()=>{on_heartbeat_css(),downloading_current=0x0;const _0x5a19ac=_0x5d6c5c['map']((_0x14a8da,_0x2d79f4)=>()=>download_encrypted(_0x14a8da['src'],_0x2d79f4));await throttlePromises(_0x5a19ac,0x2);});}})());